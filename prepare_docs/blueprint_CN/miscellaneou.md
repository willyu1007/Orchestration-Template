
# 其他事项 （miscellaneou）
> 本文档为次要文档，仅包含补充内容，不涉及repo模板的建设思想、核心体系、基础设施等。
--- 

## 项目初始化

模板将提供一套项目初始化的脚手架，基于交互收集必要信息，然后通过AI帮助完成从0-1的搭建过程。模板会包含一个专用于项目初始化的目录`/PROEJCT_INIT/`，在初始化完成后整体删除该目录。目录的内容包括：
- `/PROEJCT_INIT/doc/`：面向使用者的文档和说明
  - README：模板使用说明
  - quickstart：快速引导，如何完成初始化
- `/PROEJCT_INIT/AI/`：面向AI的初始化规范
  - 模板的架构介绍
  - 初始化操作中的规范、要求、示例，初始化相关的脚本和工具说明
  - 伪agent，通过prompt描述workflow
  - 初始化结束状态定义
- `/PROEJCT_INIT/tools/`：初始化辅助工具
  - 初始化过程中可以使用的脚本
  - 模板自动的工具路由（只给出工具地址和调用说明，一般在初始化完成后用于集成）
- `/PROEJCT_INIT/workdocs/`：AI工作目录
  - 需求文档：会有基本要求，用户可以自行上传文档，AI在工作过程中需要持续写入
  - 信息收集：列出必要字段和可选字段（占位，AI需要逐个填入），并允许记录项目专属信息
  - 执行计划：AI在收到初始化需求、阅读相关文档后，自行填充内容
  - 其他文档：例如后续建议、模块组成方案等

项目初始化的边界：
项目初始化的核心目标是了解项目整体规划、需求、开发细节等：
- 可能会用到的前后端技术栈
- 主要开发语言
- 生成相关的文档（如gitignore、requirements、环境配置等）

此外，初始化流程还可以在用户需求不明确时帮助用户扩展思路和理清头绪。
常见的用户可能认为属于项目初始化流程，但实际应该使用模板提供的其他脚手架工具完成的有：
- 如果需要迁移知识、能力、触发器等，引导用户使用模板提供的相关注册工具（而不是在初始化过程中完成）
- 完成基础功能的开发：功能开发应该在模块实例的初始化之后，所以用户需要先进行模块实例的注册。在项目初始化过程中，AI可以根据需求文档，建议模块实例的组成方式，记录到工作目录当中

- **定义初始化结束状态**: 当满足以下条件时，认为仓库初始化已完成：
  - 基线的所有必要目录和文件都已到位，并使用项目特定信息更新（如项目名称插入到需要它的文档中，任何示例占位符已删除或确认）。
  - 文档路由完全连接（例如，如果存在某些通用占位符内容，它已被替换或删除）。
  - 在新上下文中所有 CI 测试都通过（因此模板的检查仍然成功）。

典型的流程如下：
1. 用户浏览初始使用说明，唤醒AI开始项目初始化
2. AI阅读初始化规范，询问用户是否要需求文档，生成执行计划写入工作目录
3. 用户和AI进行充分交流，过程中AI会完善工作目录中的需求文档，收集必要信息，记录项目特色等信息
4. 用户需要阅读工作目录下的需求文档和信息收集，对于理解不一致的，与AI对齐想法或修改文档内容
5. 在收集完所有信息并和用户确认信息准确度后，AI将根据文档内容进行项目集成，并确保集成工作通过检验
6. 提示用户初始化完成，如有建议内容提醒用户保存相关信息，用户确认后整体删除`/PROEJCT_INIT/`目录

---

以下几个章节（数据库操作、 容器使用、Serverless部署）的内容需要逐一完善，从建设思路的角度出发，不需要具体细节，但需要讲清楚逻辑。
建设思路的重点包括：
- 基于DevOps的理念，充分考虑AI为主力开发者的条件
- 有项目级的操作入口（脚本等），有清晰可读的说明（要考虑AI使用场景，保持轻量化）
- 有完善的资产维护规范、SSOT和schema定义等，考虑CI
- 保持项目结构干净稳定
- AI在需要时候，可以通过持续维护的文档了解相关知识（例如数据库表结构、字段等）、获取操作规范（入口、说明、限制等）

在整理好初版内容后，按照以下标准进行审查完善
- 带入代码大模型的视角，内容是否对你友好，可以起到帮助，并能提高工作流程的鲁棒性
- AI是否可以基于内容构建完整可用的数据库、容器、云部署体系/架构

## 数据库操作

数据库操作需要是可控的，并建立全场景的数据库协作流程（PostgreSQL（主库）与 Redis（缓存）常见场景）。

## 容器使用

建立容器常见场景的使用规范（docker），保持整体的统一性、可读性、和可维护性。

## Serverless部署

- 交付声明  
  - 声明函数资源、触发器、域名等（用 Serverless Devs 管）
  - 清楚一键命令与环境变量/密钥注入方式
- 构建与部署入口
  - Makefile/脚本：例如 make build、make deploy-dev、make deploy-prod，内部调用 s build、s deploy 等，避免团队各自手动敲命令产生漂移
- 发布治理
  - 上线不要“覆盖式部署”，而是发布新版本，再通过别名切流/灰度/回滚（这是 Serverless 发布控制的关键能力）
- 环境分层
  - 用 IaC 或 CI 注入真实环境变量与密钥
  - 明确三套环境：dev/staging/prod 的差异（超时、并发、VPC、域名等）
- Infrastructure as Code：
  - Terraform
  - 函数/服务、权限(IAM)、触发器(API Gateway/Event/Queue)、日志、并发/超时/内存、环境变量注入方式
- 契约
  - 入口函数/handler 的签名与路由映射
  - 超时、内存、并发的默认建议（不需要精确到生产值，但要有基线）
  - 权限最小化原则：需要访问哪些云资源（S3/DB/Queue），对应 IAM policy 边界
  - 冷启动敏感点：依赖体积、初始化逻辑（这会直接影响线上体验）
- 交付形态
  - 代码包
  - 容器镜像





